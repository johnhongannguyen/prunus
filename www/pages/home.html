<!-- HOME MAP SCREEN -->

<!-- TOOLBAR -->
<!-- <div class="navbar color-theme-pink">
<div class="navbar-inner">
<div class="left">
<a href="#" class="link icon-only panel-open" data-panel="left">
<i class="icon f7-icons ios-only">menu</i>
<i class="icon material-icons md-only">menu</i>
</a>
</div>
<div class="title sliding">Prunus</div>
<div class="right">
<a href="#" class="link icon-only panel-open" data-panel="right">
<i class="icon f7-icons ios-only">menu</i>
<i class="icon material-icons md-only">menu</i>
</a>
</div>
</div>
</div> -->
<!-- END OF TOOLBAR -->

<!-- Scrollable PAGE CONTENT-->
<div class="page-content">

    <div class="app">

        <div class="nav-bar">
            <div class="icons profile"><img src="img/ic_profile.png" alt="Profile"></div>

            <div class="title">Prunus</div>

            <div class="icons settings">
                <!-- This div is just a placeholder now -->
                <img src="img/ic_settings.png" alt="Settings">
            </div>
        </div>


        <div class="custom-loader">

            <div id="map" class="elevation-4 loader-map">
                <!-- Google map will be added here programmatically. -->
            </div>


            <!-- Added programmatically -->
            <div class="loader-map"></div>

        </div>


        <!-- <button onclick="myLocation()">My location</button>
        <button onclick="getTreesAround()">Get trees around</button> -->

        <div class="fab camera-button color-black">
            <a href="#">
                <img src="img/ic_add_btn.png" alt="Add tree icon">
            </a>

        </div>
        <!-- </div> -->
    </div>
</div>
<!-- END OF PAGE CONTENT -->

<script>

    appLoader.show(".loader-map");

    $('.nav-bar .profile').click(function(){

        if(auth.getCurrentUser()){
            appNavigator.openPageProfile();
        } else {
            appNavigator.openPageLogin();
        }

    });

    $(".settings").click(function (){
        // alert("Settings");

        appNavigator.openPageSettings();
    });


    $(".camera-button").click(function() {

        clickPic();
    })


    //Opens the camera:
    function clickPic() {

        // appNavigator.openPageViewTree("-Li6BHFDHCs5BKtDIeX9");
        // return;

        let options = {
            quality: 80,
            // destinationType: Camera.DestinationType.FILE_URI,
            destinationType: Camera.DestinationType.DATA_URL,
            sourceType: Camera.PictureSourceType.CAMERA,
            // sourceType: Camera.PictureSourceType.SAVEDPHOTOALBUM,
            mediaType: Camera.MediaType.PICTURE,
            encodingType: Camera.EncodingType.JPEG,
            cameraDirection: Camera.Direction.BACK,
            // targetWidth: 300,
            // targetHeight: 400,
            // saveToPhotoAlbum: true
            correctOrientation: true //Corrects Android orientation quirks
        }

        navigator.camera.getPicture(function(imageURI) {

            //Success:
            appNavigator.openPageAddTree("data:image/jpeg;base64," + imageURI, pos.lat, pos.lng);


        }, function(msg) {

            //Error:

            // alert(msg)

        }, options);
    }
</script>
